<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forms Repository - Loan Book</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="sidebar.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        /* Styles for the hidden agreement PDF generation */
        .agreement-container { position: relative; overflow: hidden; background-color: white; width: 210mm; min-height: 297mm; margin: 0 auto; padding: 35mm 20mm 20mm 20mm; border: 1px solid #ccc; box-sizing: border-box; font-family: 'Times New Roman', Times, serif; }
        .agreement-container h1 { text-align: center; color: #000; text-transform: uppercase; text-decoration: underline; margin-bottom: 30px; font-size: 24px; border: none; padding: 0; }
        .agreement-container h3 { font-size: 14px; margin-top: 20px; margin-bottom: 5px; text-transform: uppercase; color: #000; }
        .agreement-content { margin: 20px 0; line-height: 1.8; color: #000; text-align: justify; font-size: 12pt; }
        .agreement-signature-section { display: flex; justify-content: space-between; margin-top: 80px; }
        .agreement-signature-box { border-top: 1px solid #000; width: 22%; padding-top: 5px; text-align: center; font-size: 12pt; }
        .agreement-watermark {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 100px; color: rgba(150, 150, 150, 0.15); z-index: 0; pointer-events: none;
            font-weight: bold; white-space: nowrap; border: 10px solid rgba(150, 150, 150, 0.15); padding: 20px; border-radius: 20px;
        }
        .sidebar nav::-webkit-scrollbar { display: none; }
        .sidebar nav { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body>
    <div class="app-layout">
        <!-- Sidebar -->
       <aside class="sidebar">
             <div class="sidebar-header">
                <img id="sidebar-logo" src="LOGOS/logo.jpg" alt="Company Logo" style="width: 60px; height: 60px;">
                <span id="sidebar-company-name">SANJARANG GROUP PVT. LTD.</span>
            </div>
            <nav>
                <a href="dashboard.html"><i class="bi bi-speedometer2"></i> <span class="link-text">Dashboard</span></a>
                <a href="manage-loans.html"><i class="bi bi-cash-coin"></i> <span class="link-text">Manage Loans</span></a>
                <a href="wallet.html"><i class="bi bi-wallet2"></i> <span class="link-text">Wallet</span></a>
                <a href="expenses.html"><i class="bi bi-receipt"></i> <span class="link-text">Expenses</span></a>
                <a href="report.html"><i class="bi bi-bar-chart-line"></i> <span class="link-text">Report</span></a>
                <a href="forms.html" class="active"><i class="bi bi-file-earmark-text"></i> <span class="link-text">Forms</span></a>
                <a href="profile.html"><i class="bi bi-building"></i> <span class="link-text">Company Profile</span></a>
                <a href="settings.html"><i class="bi bi-gear"></i> <span class="link-text">Settings</span></a>
                <a href="#" id="logout-btn"><i class="bi bi-box-arrow-right"></i> <span class="link-text">Logout</span></a>
            </nav>
            <div class="sidebar-footer">
                <button id="sidebar-collapse-btn" class="collapse-btn">
                    <span class="icon"><i class="bi bi-chevron-left"></i></span>
                    <span class="link-text">Collapse Sidebar</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="main-content">
            <header class="custom-header-box">
                <div class="header-container">
                    <div class="header-left">
                        <button id="sidebar-toggle" class="icon-btn">☰</button>
                        <div class="header-title-group">
                            <h1>Forms Repository</h1>
                            <div class="user-profile">
                                <span class="user-name">Admin</span>
                                <span class="user-role">Administrator</span>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <main>
                <section class="card">
                    <h2>Available Documents</h2>
                    <p>Access and manage standard forms and templates.</p>
                    <ul style="list-style: none; padding: 0; margin-top: 20px;">
                          <li style="background: #f8f9fa; padding: 20px; margin-bottom: 15px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #eee; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
                            <div>
                                <div style="font-weight: bold; font-size: 1.1rem; color: #2c3e50;">Loan Application Form (Form A)</div>
                                <div style="font-size: 0.9rem; color: #7f8c8d; margin-top: 5px;">Standard application form for new borrower registration</div>
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <a href="FORM_A.pdf" download="FORM_A.pdf" style="background-color: #27ae60; color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px; font-weight: 600; transition: background 0.2s;">Download PDF</a>
                                <a href="FORM_A.pdf" target="_blank" style="background-color: #3498db; color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px; font-weight: 600; transition: background 0.2s;">Open PDF</a>
                            </div>
                        </li>
                        <li style="background: #f8f9fa; padding: 20px; margin-bottom: 15px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #eee; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
                            <div>
                                <div style="font-weight: bold; font-size: 1.1rem; color: #2c3e50;">Loan Agreement (FORM B)</div>
                                <div style="font-size: 0.9rem; color: #7f8c8d; margin-top: 5px;">Standard legal agreement between lender and borrower</div>
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <a href="FORMB.pdf" download="FORM.pdf" style="background-color: #27ae60; color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px; font-weight: 600; transition: background 0.2s;">Download PDF</a>
                                <a href="FORMB.pdf" target="_blank" style="background-color: #3498db; color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px; font-weight: 600; transition: background 0.2s;">Open PDF</a>
                            </div>
                        </li>
                         <li style="background: #f8f9fa; padding: 20px; margin-bottom: 15px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #eee; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
                            <div>
                                <div style="font-weight: bold; font-size: 1.1rem; color: #2c3e50;">No Objection Certificate (NOC)</div>
                                <div style="font-size: 0.9rem; color: #7f8c8d; margin-top: 5px;">Standard certificate for loan clearance confirmation.</div>
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <a href="NOC.pdf" download="NOC.pdf" style="background-color: #27ae60; color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px; font-weight: 600; transition: background 0.2s;">Download PDF</a>
                                <a href="NOC.pdf" target="_blank" style="background-color: #3498db; color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px; font-weight: 600; transition: background 0.2s;">Open PDF</a>
                            </div>
                        </li>

                    </ul>
                </section>

                <section class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2>Custom Forms</h2>
                        <button id="upload-form-btn" style="background-color: #3498db; color: white; padding: 10px 20px; border: none; border-radius: 6px; font-weight: 600; cursor: pointer;">+ Upload New</button>
                    </div>
                    <p>Manage your own uploaded templates and documents.</p>
                    <ul id="custom-forms-list" style="list-style: none; padding: 0; margin-top: 20px;">
                        <!-- Populated by JS -->
                    </ul>
                </section>
            </main>
        </div>
    </div>

    <!-- Hidden Blank Form Template for PDF Generation -->
    <div style="position: absolute; left: -9999px;">
        <div id="blank-loan-form" class="paper-container">
            <div class="paper-header">
                <h1>SANJARANG PRIVATE LIMITED</h1>
                <h2>LOAN APPLICATION FORM</h2>
                <p>FORM - A</p>
            </div>

            <div class="form-section">
                <div class="section-title">Applicant Details</div>
                <div class="paper-row">
                    <div class="paper-col-2">
                        <div class="paper-row">
                            <div class="paper-col"><div class="field-group"><span class="field-label">Name of Applicant</span><input type="text" class="paper-input"></div></div>
                            <div class="paper-col"><div class="field-group"><span class="field-label">Date of Birth</span><input type="text" class="paper-input"></div></div>
                        </div>
                        <div class="paper-row">
                            <div class="paper-col"><div class="field-group"><span class="field-label">Father / Husband Name</span><input type="text" class="paper-input"></div></div>
                            <div class="paper-col"><div class="field-group"><span class="field-label">Guarantor Name</span><input type="text" class="paper-input"></div></div>
                        </div>
                    </div>
                    <div class="paper-col" style="flex: 0 0 130px;">
                        <div class="photo-box">Photo Area</div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">Address & Contact</div>
                <div class="paper-row">
                    <div class="paper-col"><div class="field-group"><span class="field-label">Village</span><input type="text" class="paper-input"></div></div>
                    <div class="paper-col"><div class="field-group"><span class="field-label">P.O.</span><input type="text" class="paper-input"></div></div>
                </div>
                <div class="paper-row">
                    <div class="paper-col"><div class="field-group"><span class="field-label">District</span><input type="text" class="paper-input"></div></div>
                    <div class="paper-col"><div class="field-group"><span class="field-label">Pin No</span><input type="text" class="paper-input"></div></div>
                </div>
                <div class="paper-row">
                    <div class="paper-col"><div class="field-group"><span class="field-label">Mobile</span><input type="text" class="paper-input"></div></div>
                    <div class="paper-col"><div class="field-group"><span class="field-label">WhatsApp</span><input type="text" class="paper-input"></div></div>
                    <div class="paper-col"><div class="field-group"><span class="field-label">Email</span><input type="text" class="paper-input"></div></div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">KYC & Loan Details</div>
                <div class="paper-row">
                    <div class="paper-col"><div class="field-group"><span class="field-label">Aadhaar Card No</span><input type="text" class="paper-input"></div></div>
                    <div class="paper-col"><div class="field-group"><span class="field-label">PAN Card No</span><input type="text" class="paper-input"></div></div>
                </div>
                <div class="paper-row">
                    <div class="paper-col"><div class="field-group"><span class="field-label">Loan Amount (₹)</span><input type="text" class="paper-input"></div></div>
                    <div class="paper-col"><div class="field-group"><span class="field-label">Interest Rate (%)</span><input type="text" class="paper-input"></div></div>
                    <div class="paper-col"><div class="field-group"><span class="field-label">Tenure (Months)</span><input type="text" class="paper-input"></div></div>
                </div>
                <div class="paper-row">
                    <div class="paper-col"><div class="field-group"><span class="field-label">Issue Date</span><input type="text" class="paper-input"></div></div>
                    <div class="paper-col-2"><div class="field-group"><span class="field-label">Purpose</span><input type="text" class="paper-input"></div></div>
                </div>
            </div>

            <div class="signature-section" style="display: flex; justify-content: space-between; margin-top: 60px; padding: 0 20px;">
                <div class="signature-box" style="text-align: center; width: 200px;">
                    <div style="height:50px;"></div>
                    <div class="signature-line" style="border-top: 1px solid #000; margin-top: 5px; padding-top: 5px; font-weight: bold; font-size: 12px;">Applicant Signature</div>
                </div>
                <div class="signature-box" style="text-align: center; width: 200px;">
                    <div style="height:50px;"></div>
                    <div class="signature-line" style="border-top: 1px solid #000; margin-top: 5px; padding-top: 5px; font-weight: bold; font-size: 12px;">Guarantor Signature</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden NOC Template for PDF Generation -->
    <div style="position: absolute; left: -9999px;">
        <div id="noc-template" class="agreement-container">
            <div class="agreement-watermark">NOC</div>
            <h1>TO WHOM IT MAY CONCERN</h1>
            <p style="text-align: right;"><strong>Date:</strong> __________________</p>

            <div class="agreement-content">
                <p>This is to certify that <strong><span id="noc-borrower-name">______________________________________________________</span></strong>,
                resident of <strong>________________________________________________________________________</strong>,
                had availed a loan (Loan Ref: <strong>__________________</strong>) from <strong><span id="noc-company-name">SANJARANG PRIVATE LIMITED</span></strong>.</p>

                <p>We hereby confirm that the said borrower has repaid the entire loan amount along with the accrued interest and other charges. There are no outstanding dues against the said loan account as of date.</p>

                <p>This institution has <strong>NO OBJECTION</strong> to the borrower closing this account or availing financial facilities from other institutions.</p>
            </div>

            <div class="agreement-signature-section">
                <div class="agreement-signature-box" style="border:none;"></div> <!-- Spacer -->
                <div class="agreement-signature-box" style="width: 40%;">
                    <p><strong>For <span id="noc-company-sign-name">Sanjarang Pvt Ltd</span></strong><br>(Authorized Signatory)</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Custom Form Modal -->
    <div id="upload-form-modal" class="custom-modal">
        <div class="custom-modal-content" style="max-width: 500px;">
            <span class="custom-close-modal" id="close-upload-modal">&times;</span>
            <h2>Upload Custom Form</h2>
            <form id="uploadForm">
                <div class="form-group" style="margin-bottom: 15px;">
                    <label style="display:block; margin-bottom:5px; font-weight:bold;">Form Name</label>
                    <input type="text" id="custom-form-name" placeholder="e.g. KYC Update Form" required style="width: 100%;">
                </div>
                <div class="form-group" style="margin-bottom: 15px;">
                    <label style="display:block; margin-bottom:5px; font-weight:bold;">Description</label>
                    <input type="text" id="custom-form-desc" placeholder="Short description..." required style="width: 100%;">
                </div>
                <div class="form-group" style="margin-bottom: 15px;">
                    <label style="display:block; margin-bottom:5px; font-weight:bold;">Select PDF</label>
                    <input type="file" id="custom-form-file" accept="application/pdf" required style="width: 100%;">
                </div>
                <button type="submit" style="width: 100%; margin-top: 10px;">Upload</button>
            </form>
        </div>
    </div>

    <script src="app.js" defer></script>
</body>
</html>